# 企業編集 画面 詳細設計

---

## 画面名

企業編集

---

## 目的

ログイン済みユーザーが企業情報を編集できる。

---

## 対象スキーマ

Company

---

## ルーティング

- 企業詳細：`/companies/[companyId]`
- 企業編集：`/companies/[companyId]/edit`

---

## 表示項目

| 項目名 | 編集可否 | 備考 |
| ------ | -------- | ---- |
| 企業名 | 可       | 必須 |
| 連絡先 | 可       | 任意 |
| 業種   | 可       | 必須 |
| 担当者 | 可       | 必須 |

※ 企業IDはURLパラメータで保持し、画面上には表示しない。

---

## 機能

- 企業情報の編集
- バリデーション
- 更新
- 戻る（企業詳細へ）

---

## 挙動

- 企業詳細画面から企業編集画面へ遷移する
- 更新ボタン押下時：
  - 入力バリデーションを実行
  - 正常時は更新処理を行い、成功メッセージを表示後、企業詳細画面へリダイレクト
  - 異常時はエラーメッセージを表示し、編集画面に留まる

- 戻るボタン押下時：
  - 企業詳細画面へ遷移する

---

## 入力ルール

| 項目名 | 必須 | 入力制約               |
| ------ | ---- | ---------------------- |
| 企業名 | Yes  | 1〜200文字             |
| 連絡先 | No   | 0〜500文字（自由記述） |
| 業種   | Yes  | 1〜100文字             |
| 担当者 | Yes  | 1〜100文字             |

---

## 権限

- ログイン済みユーザーは編集可能

---

## 履歴

- 編集履歴は保持しない

---

## エラーハンドリング

- バリデーションエラー：
  - 各入力項目の下にエラーメッセージを表示

- 更新失敗時：
  - 画面上部にエラーメッセージを表示

---

## API設計

---

### 企業情報取得 API（編集画面初期表示）

**Method / Path**

```
GET /api/companies/{companyId}
```

**認証**

- 必須

**Path Parameter**

| 名前      | 型     | 必須 |
| --------- | ------ | ---- |
| companyId | string | Yes  |

**レスポンス（200）**

```json
{
  "id": "company-001",
  "name": "株式会社サンプル",
  "contact": "sample@example.com",
  "industry": "IT",
  "staff": "山田 太郎"
}
```

**エラー**

| Status | 内容           |
| ------ | -------------- |
| 401    | 未認証         |
| 404    | 対象データなし |
| 500    | サーバーエラー |

---

### 企業情報更新 API

**Method / Path**

```
PATCH /api/companies/{companyId}
```

**認証**

- 必須

**Path Parameter**

| 名前      | 型     | 必須 |
| --------- | ------ | ---- |
| companyId | string | Yes  |

**Request Body**

```json
{
  "name": "株式会社サンプル",
  "contact": "sample@example.com",
  "industry": "IT",
  "staff": "山田 太郎"
}
```

**バリデーション**

| 項目     | 必須 | 制約       |
| -------- | ---- | ---------- |
| name     | Yes  | 1〜200文字 |
| contact  | No   | 0〜500文字 |
| industry | Yes  | 1〜100文字 |
| staff    | Yes  | 1〜100文字 |

**レスポンス（200）**

```json
{
  "message": "企業情報を更新しました"
}
```

**エラー**

| Status | 内容                 |
| ------ | -------------------- |
| 400    | バリデーションエラー |
| 401    | 未認証               |
| 404    | 対象データなし       |
| 500    | サーバーエラー       |

---

## 画面 × API 対応表

| 画面     | 処理     | API                              |
| -------- | -------- | -------------------------------- |
| 企業編集 | 初期表示 | GET /api/companies/{companyId}   |
| 企業編集 | 更新     | PATCH /api/companies/{companyId} |
