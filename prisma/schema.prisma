generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Company {
  id       String  @id @default(cuid())
  name     String  @db.VarChar(200)
  industry String  @db.VarChar(100)
  contact  String? @db.VarChar(500)
  memo     String?

  @@map("companies")
}

model SalesUser {
  id         String      @id @db.VarChar(50)
  name       String      @db.VarChar(255)
  password   String      @db.VarChar(255)
  isActive   Boolean     @default(true)
  jobSeekers JobSeeker[]

  @@map("sales_users")
}

model JobSeeker {
  id              String             @id @default(cuid())
  salesUserId     String             @db.VarChar(50)
  name            String             @db.VarChar(100)
  age             Int?
  email           String             @db.VarChar(255)
  phone           String             @db.VarChar(20)
  desiredLocation String             @db.VarChar(100)
  status          JobSeekerStatus    @default(NEW)
  memo            String?            @db.VarChar(2000)
  createdAt       DateTime           @default(now())
  updatedAt       DateTime           @updatedAt
  desiredJobType  String             @db.VarChar(100)
  histories       JobSeekerHistory[]
  salesUser       SalesUser          @relation(fields: [salesUserId], references: [id])

  @@index([salesUserId])
  @@map("job_seekers")
}

model JobSeekerHistory {
  id            String          @id @default(cuid())
  jobSeekerId   String
  status        JobSeekerStatus
  memo          String?         @db.VarChar(2000)
  createdAt     DateTime        @default(now())
  salesUserId   String          @db.VarChar(50)
  salesUserName String          @db.VarChar(255)
  jobSeeker     JobSeeker       @relation(fields: [jobSeekerId], references: [id])

  @@index([jobSeekerId, createdAt])
  @@map("job_seeker_histories")
}

enum JobSeekerStatus {
  NEW
  INTERVIEWED
  PROPOSING
  OFFERED
  CLOSED
}
